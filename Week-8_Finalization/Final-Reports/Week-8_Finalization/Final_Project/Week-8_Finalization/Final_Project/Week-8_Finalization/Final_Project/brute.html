<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Password Attacks — Brute Force Demo</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{--bg:#0b1220;--card:#0f1724;--muted:#94a3b8;--accent:#7c3aed}
    html,body{height:100%}
    body{background:linear-gradient(180deg,#020617 0%, #071032 100%);font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial}
    .card{background:linear-gradient(180deg,rgba(255,255,255,0.02),transparent);backdrop-filter:blur(4px);box-shadow:0 8px 24px rgba(2,6,23,0.6)}
    .mono{font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, monospace}
    /* tiny confetti */
    .confetti-piece{position:absolute;width:8px;height:12px;opacity:0.95;border-radius:2px;animation:fall 1400ms linear forwards}
    @keyframes fall{to{transform:translateY(420px) rotate(540deg);opacity:0}}
    /* small shake for wrong */
    .shake{animation:shake 600ms}
    @keyframes shake{0%{transform:translateX(0)}25%{transform:translateX(-6px)}50%{transform:translateX(6px)}75%{transform:translateX(-4px)}100%{transform:translateX(0)} }
  </style>
</head>
<body class="text-slate-100">
  <div class="max-w-6xl mx-auto p-6">
    <header class="flex items-center justify-between mb-6">
      <div>
        <h1 class="text-2xl font-bold">Password Attacks — <span class="text-violet-400">Brute Force Demo</span></h1>
        <p class="text-sm text-slate-400 mt-1">Interactive, educational simulation (client-side only). Learn how brute force works and how defenses help.</p>
      </div>
      <nav class="space-x-2">
        <button data-nav="demo" class="nav-btn px-3 py-1 rounded bg-violet-700/30 hover:bg-violet-700/40">Demo</button>
        <button data-nav="quiz" class="nav-btn px-3 py-1 rounded hover:bg-white/5">Quiz</button>
        <button data-nav="tips" class="nav-btn px-3 py-1 rounded hover:bg-white/5">Prevention</button>
      </nav>
    </header>

    <main class="grid grid-cols-1 md:grid-cols-3 gap-6">
      <section class="md:col-span-2 card p-6 rounded-2xl">
        <!-- Demo area -->
        <div id="page-demo">
          <h2 class="text-xl font-semibold mb-2">Brute Force Simulation</h2>
          <p class="text-sm text-slate-400 mb-4">Enter a short demo password (this stays in your browser). The simulator will try combinations until it finds it. Keep the demo password short (1–4 characters) for a visible result.</p>

          <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-4">
            <label class="flex flex-col">
              <span class="text-sm text-slate-300 mb-1">Demo password (letters/numbers only)</span>
              <input id="demo-password" maxlength="5" placeholder="e.g. a1b" class="px-3 py-2 rounded bg-slate-900 border border-slate-700 mono" />
            </label>

            <label class="flex flex-col">
              <span class="text-sm text-slate-300 mb-1">Character set</span>
              <select id="charset" class="px-3 py-2 rounded bg-slate-900 border border-slate-700">
                <option value="lower">Lowercase letters (a–z)</option>
                <option value="lowernum">Lowercase + digits</option>
                <option value="alnum">Lowercase+UPPER+digits</option>
              </select>
            </label>
          </div>

          <div class="flex items-center gap-3 mb-4">
            <button id="start" class="px-4 py-2 rounded bg-violet-600 hover:bg-violet-500">Start Attack</button>
            <button id="stop" class="px-4 py-2 rounded bg-slate-800 hover:bg-slate-700">Stop</button>
            <div class="ml-auto text-sm text-slate-400">Speed: <input id="speed" type="range" min="1" max="50" value="12" class="align-middle" /></div>
          </div>

          <div class="rounded-lg bg-slate-900 p-4 border border-slate-800">
            <div class="flex items-center justify-between mb-2">
              <div>
                <div class="text-xs text-slate-400">Attempts</div>
                <div id="attempts" class="text-2xl font-mono mono">0</div>
              </div>
              <div class="text-right">
                <div class="text-xs text-slate-400">Current attempt</div>
                <div id="current" class="text-lg mono">—</div>
              </div>
              <div class="text-right">
                <div class="text-xs text-slate-400">Progress</div>
                <div id="progressText" class="text-sm mono">0 / 0</div>
              </div>
            </div>

            <div class="w-full bg-slate-800 h-3 rounded overflow-hidden mt-3">
              <div id="progressBar" class="h-3 rounded bg-violet-500" style="width:0%"></div>
            </div>

            <div class="mt-4 text-sm text-slate-400">Result: <span id="result" class="font-semibold">Idle</span></div>
          </div>

          <div class="mt-6 bg-slate-900 p-4 rounded border border-slate-800">
            <h3 class="font-medium mb-2">Visualization</h3>
            <div id="visual" class="h-36 rounded-lg bg-gradient-to-b from-slate-900 to-slate-950 flex items-center justify-center text-slate-500 mono">Will show attempts here</div>
          </div>

        </div>

        <!-- Quiz page placeholder (will be swapped via JS) -->
        <div id="page-quiz" class="hidden">
          <h2 class="text-xl font-semibold mb-2">Quiz: Test your knowledge</h2>
          <div id="quiz-container" class="space-y-4 mt-4"></div>
          <div class="mt-4">
            <button id="submit-quiz" class="px-4 py-2 rounded bg-green-600">Submit</button>
            <div id="quiz-result" class="mt-3 text-sm text-slate-300"></div>
          </div>
        </div>

        <!-- Prevention page placeholder -->
        <div id="page-tips" class="hidden">
          <h2 class="text-xl font-semibold mb-2">Defenses & Best Practices</h2>
          <ul class="mt-3 list-disc ml-5 space-y-2 text-slate-300">
            <li>Use long, random passphrases (12+ characters).</li>
            <li>Enable account lockout or exponential backoff after failed attempts.</li>
            <li>Use Multi-factor Authentication (2FA / MFA).</li>
            <li>Use password managers to generate & store unique passwords.</li>
            <li>Monitor login attempts and use rate-limiting.</li>
          </ul>
        </div>

      </section>

      <aside class="card p-4 rounded-2xl">
        <div class="mb-4">
          <h3 class="font-semibold">Quick Controls</h3>
          <p class="text-sm text-slate-400">Change demo options and view stats.</p>
        </div>
        <div class="space-y-3">
          <div>
            <div class="text-xs text-slate-400">Estimated search space</div>
            <div id="search-space" class="mono text-lg">0</div>
          </div>

          <div>
            <div class="text-xs text-slate-400">Estimated time (approx)</div>
            <div id="est-time" class="mono text-lg text-amber-300">—</div>
          </div>

          <div>
            <div class="text-xs text-slate-400">Last run attempts</div>
            <div id="last-run" class="mono text-lg">—</div>
          </div>

          <div>
            <button id="reset" class="mt-3 w-full px-3 py-2 rounded bg-slate-800">Reset</button>
          </div>

          <div class="mt-4 text-xs text-slate-400">Note: This tool is a <strong>client-side simulation</strong> for learning only. Do not use to attack systems.</div>
        </div>
      </aside>
    </main>
  </div>

  <div id="confetti-area" style="position:fixed;left:0;top:0;pointer-events:none;width:100%;height:100%;overflow:hidden;"></div>

  <script>
    // --- Utilities & state ---
    const charsetOptions = {
      lower: 'abcdefghijklmnopqrstuvwxyz',
      lowernum: 'abcdefghijklmnopqrstuvwxyz0123456789',
      alnum: 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'
    };

    let running = false;
    let attempts = 0;
    let totalToTry = 0;
    let stopRequested = false;
    let lastRunAttempts = 0;

    const $ = id => document.getElementById(id);

    // --- Navigation ---
    document.querySelectorAll('.nav-btn').forEach(btn => btn.addEventListener('click', () => {
      const target = btn.dataset.nav;
      showPage(target);
    }));

    function showPage(name){
      ['demo','quiz','tips'].forEach(p => {
        $('page-'+p).classList.toggle('hidden', p!==name);
      });
    }

    // --- brute-force generator (iterative, not recursive heavy) ---
    function* comboGenerator(chars, maxLen){
      // yields combinations starting at length 1 to maxLen
      for(let len=1; len<=maxLen; len++){
        // initialize indices
        const idx = Array(len).fill(0);
        while(true){
          yield idx.map(i=>chars[i]).join('');
          // increment
          let pos = len-1;
          while(pos>=0){
            idx[pos]++;
            if(idx[pos] < chars.length) break;
            idx[pos]=0; pos--;
          }
          if(pos<0) break; // finished this length
        }
      }
    }

    function estimateSearchSpace(charsLength, maxLen){
      let sum=0;
      for(let l=1;l<=maxLen;l++) sum += Math.pow(charsLength, l);
      return sum;
    }

    function approxTime(seconds){
      if(seconds>86400) return (seconds/86400).toFixed(2)+" days";
      if(seconds>3600) return (seconds/3600).toFixed(2)+" hours";
      if(seconds>60) return (seconds/60).toFixed(2)+" min";
      return Math.max(0,Math.round(seconds)) + ' sec';
    }

    // --- controls ---
    $('start').onclick = ()=>{
      if(running) return;
      const pwd = ($('demo-password').value||'').trim();
      if(!pwd){ alert('Please enter a demo password (short, letters/digits).'); return; }
      const charsetKey = $('charset').value;
      const chars = charsetOptions[charsetKey];
      // restrict: only allow chars in chosen set for visibility and safety
      for(const ch of pwd){ if(!chars.includes(ch)){ alert('Password contains characters outside the chosen charset.'); return; } }
      const maxLen = pwd.length;

      const space = estimateSearchSpace(chars.length, maxLen);
      $('search-space').innerText = space.toLocaleString();
      // estimate: attempts per second depends on speed slider
      const speed = Number($('speed').value);
      // map speed slider to approx ops/sec for demo only (not real)
      const opsPerSec = Math.min(3000, Math.max(10, speed*30));
      const approxSeconds = space/opsPerSec;
      $('est-time').innerText = approxTime(approxSeconds);

      startSimulation(chars, maxLen, pwd, opsPerSec);
    };

    $('stop').onclick = ()=>{
      stopRequested = true;
    };

    $('reset').onclick = ()=>{
      stopRequested = true;
      running=false; attempts=0; totalToTry=0; lastRunAttempts=0;
      $('attempts').innerText='0'; $('current').innerText='—'; $('progressBar').style.width='0%'; $('progressText').innerText='0 / 0'; $('result').innerText='Idle'; $('visual').innerText='Will show attempts here'; $('last-run').innerText='—';
    };

    // --- simulation ---
    async function startSimulation(chars, maxLen, password, opsPerSec){
      running = true; stopRequested = false; attempts = 0; totalToTry = estimateSearchSpace(chars.length, maxLen);
      $('attempts').innerText = '0'; $('result').innerText = 'Running...';
      $('progressText').innerText = `0 / ${totalToTry}`;
      let gen = comboGenerator(chars, maxLen);

      // pace control
      const delay = ms => new Promise(r=>setTimeout(r,ms));
      const msPerOp = Math.max(1, Math.round(1000 / opsPerSec));

      for(const attempt of gen){
        if(stopRequested) break;
        attempts++;
        $('attempts').innerText = attempts.toLocaleString();
        $('current').innerText = attempt;
        $('progressText').innerText = `${attempts} / ${totalToTry}`;
        const pct = Math.round((attempts/totalToTry)*100);
        $('progressBar').style.width = pct + '%';
        $('visual').innerText = attempt;

        if(attempt === password){
          $('result').innerText = `Password found: ${attempt}`;
          lastRunAttempts = attempts;
          $('last-run').innerText = lastRunAttempts.toLocaleString();
          running=false;
          celebrate();
          return;
        }

        // small batch to keep UI responsive: if opsPerSec large, we do micro-batches
        // adaptively await to match approximate speed
        await delay(msPerOp);
      }

      if(stopRequested){
        $('result').innerText = 'Stopped by user.'; lastRunAttempts = attempts; $('last-run').innerText = lastRunAttempts.toLocaleString(); running=false; return;
      }

      $('result').innerText = 'Completed — password not found (maybe longer than max length).'; lastRunAttempts = attempts; $('last-run').innerText = lastRunAttempts.toLocaleString(); running=false;
    }

    // --- confetti ---
    function celebrate(){
      const area = $('confetti-area');
      for(let i=0;i<50;i++){
        const el = document.createElement('div');
        el.className='confetti-piece';
        el.style.left = Math.random()*100 + '%';
        el.style.top = (10 + Math.random()*10) + '%';
        el.style.background = ['#60a5fa','#f472b6','#fbbf24','#10b981','#a78bfa'][Math.floor(Math.random()*5)];
        el.style.transform = `translateY(0) rotate(${Math.random()*360}deg)`;
        el.style.animationDelay = (Math.random()*300) + 'ms';
        area.appendChild(el);
        setTimeout(()=> el.remove(), 1800 + Math.random()*400);
      }
    }

    // --- quiz ---
    const quizQuestions = [
      {q:'What is a brute force attack?', a:['Using many guesses to find credentials','Phishing users by email','Modifying code to bypass login','Listening to network traffic'], correct:0},
      {q:'Which increases resistance to brute force the most?', a:['Longer password','Using only digits','Short common words','Changing username'], correct:0},
      {q:'Which defense is effective against brute force?', a:['Account lockout after attempts','Using short passwords','Disabling HTTPS','Allowing unlimited retries'], correct:0},
      {q:'What greatly increases search space?', a:['Adding symbols and length','Using only lowercase','Using only numbers','Using short words'], correct:0},
      {q:'What is a safe practice?', a:['Use a password manager','Reusing same password on sites','Sharing password via chat','Using "1234"'], correct:0}
    ];

    function renderQuiz(){
      const container = $('quiz-container'); container.innerHTML='';
      quizQuestions.forEach((qq, i)=>{
        const card = document.createElement('div'); card.className='p-3 rounded bg-slate-900 border border-slate-800';
        const qel = document.createElement('div'); qel.className='font-medium mb-2'; qel.innerText = (i+1)+'. '+qq.q;
        card.appendChild(qel);
        qq.a.forEach((opt, idx)=>{
          const id = `q${i}_o${idx}`;
          const r = document.createElement('div'); r.className='mb-1';
          r.innerHTML = `<label class="flex items-center gap-2"><input type="radio" name="q${i}" id="${id}" value="${idx}" /> <span class="text-sm">${opt}</span></label>`;
          card.appendChild(r);
        });
        container.appendChild(card);
      });
    }

    $('submit-quiz').addEventListener('click', ()=>{
      let score=0; const wrong=[];
      quizQuestions.forEach((qq,i)=>{
        const sel = document.querySelector(`input[name=q${i}]:checked`);
        const val = sel ? Number(sel.value) : -1;
        if(val===qq.correct) score++; else wrong.push(i+1);
      });
      $('quiz-result').innerText = `Score: ${score} / ${quizQuestions.length}. ${wrong.length? 'Review Q:'+wrong.join(', '): 'Great job!'}`;
    });

    // --- init ---
    renderQuiz();
    showPage('demo');

    // update estimates when inputs change
    function updateEstimates(){
      const pwd = ($('demo-password').value||'').trim();
      const charset = $('charset').value; const chars = charsetOptions[charset];
      const maxLen = Math.max(1, pwd.length||1);
      const space = estimateSearchSpace(chars.length, maxLen);
      $('search-space').innerText = space.toLocaleString();
      const opsPerSec = Math.min(3000, Math.max(10, Number($('speed').value)*30));
      $('est-time').innerText = approxTime(space/opsPerSec);
      $('progressText').innerText = `0 / ${space}`;
    }
    ['demo-password','charset','speed'].forEach(id=>{ $(id).addEventListener('input', updateEstimates); });
    updateEstimates();

    // small safety: prevent accidental heavy loops by limiting password length to 5
    document.querySelector('form')?.addEventListener('submit', e=>e.preventDefault());
  </script>
</body>
</html>
